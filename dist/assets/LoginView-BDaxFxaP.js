import{d as _,i as T,p as d,z as S,A as V,c as x,a as e,t as u,k as a,B as j,e as A,v as m,x as g,C as B,D as C,f as I,o as v}from"./index-D9-lQFsJ.js";const M={class:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8"},N={class:"sm:mx-auto sm:w-full sm:max-w-sm"},R={class:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900 dark:text-white"},q={class:"mt-6 flex justify-center"},D={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},E={key:0},L={for:"name",class:"block text-sm/6 font-medium text-gray-900 dark:text-gray-100"},U={class:"mt-2"},F={for:"email",class:"block text-sm/6 font-medium text-gray-900 dark:text-gray-100"},z={class:"mt-2"},O={for:"password",class:"block text-sm/6 font-medium text-gray-900 dark:text-gray-100"},P={class:"mt-2"},G=["disabled"],K=_({__name:"LoginView",setup(H){const h=I(),{t:o}=T(),i=d(!1),c=d(""),l=d(""),n=d(""),f=d(!1),p=S(),y=V();function b(){i.value=!i.value}function k(s){if(typeof s=="string")return s;if(s&&typeof s=="object"){const t=s;if(typeof t.detail=="string")return t.detail;if(typeof t.message=="string")return t.message}return i.value?o("registerFailed"):o("loginFailed")}async function w(){if(i.value){if(!c.value||!l.value||!n.value)return}else if(!l.value||!n.value)return;f.value=!0;try{if(i.value){const{access_token:s,refresh_token:t}=await B({name:c.value,email:l.value,password:n.value});p.setTokens(s,t)}else{const{access_token:s,refresh_token:t}=await C({email:l.value,password:n.value});p.setTokens(s,t)}h.push({name:"home"})}catch(s){y.addNotify(k(s))}finally{f.value=!1}}return(s,t)=>(v(),x("div",M,[e("div",N,[e("h2",R,u(i.value?a(o)("createAccountTitle"):a(o)("signInTitle")),1),e("div",q,[e("button",{type:"button",onClick:b,class:"rounded-md px-3 py-1.5 text-sm font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-white/5 dark:text-gray-300 dark:hover:bg-white/10"},u(i.value?a(o)("switchToLogin"):a(o)("switchToRegister")),1)])]),e("div",D,[e("form",{class:"space-y-6",action:"#",method:"POST",onSubmit:j(w,["prevent"])},[i.value?(v(),x("div",E,[e("label",L,u(a(o)("name")),1),e("div",U,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>c.value=r),type:"text",name:"name",id:"name",autocomplete:"name",required:"",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500"},null,512),[[g,c.value]])])])):A("",!0),e("div",null,[e("label",F,u(a(o)("email")),1),e("div",z,[m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>l.value=r),type:"email",name:"email",id:"email",autocomplete:"email",required:"",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500"},null,512),[[g,l.value]])])]),e("div",null,[e("label",O,u(a(o)("password")),1),e("div",P,[m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>n.value=r),type:"password",name:"password",id:"password",autocomplete:"current-password",required:"",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500"},null,512),[[g,n.value]])])]),e("div",null,[e("button",{disabled:f.value,type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 dark:bg-indigo-500 dark:shadow-none dark:hover:bg-indigo-400 dark:focus-visible:outline-indigo-500 disabled:opacity-60"},u(f.value?i.value?a(o)("creating"):a(o)("signingIn"):i.value?a(o)("createAccount"):a(o)("signIn")),9,G)])],32)])]))}});export{K as default};
