import{g as _,h as x,d as v,i as b,b as f,j as C,c as n,a as t,e as m,t as r,k as e,F as u,r as y,n as w,l as k,o as c}from"./index-nbjLYRqr.js";async function L(){const{data:i,error:a}=await _.GET("/v1/memory/categories");if(a)throw a;if(!i)throw new Error("Empty response");return i}async function M(i,a,o){const{data:d,error:l}=await _.GET("/v1/memory/category/page",{params:{query:{category:i,offset:a,limit:o}}});if(l)throw l;if(!d)throw new Error("Empty response");return d}const P=x("memory",{state:()=>({categories:[],selectedCategory:null,memories:[],offset:0,limit:30,isLoading:!1}),getters:{hasPrevPage:i=>i.offset>0,nowPage:i=>Math.floor(i.offset/i.limit)+1},actions:{async fetchCategories(){this.isLoading=!0;const i=await L();this.categories=i,this.isLoading=!1},async setFakeCategories(){this.categories=["test1","test2","test3"]},setFakeMemories(){this.memories=[{id:1,content:"test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1test1",language:"test1",category:"test1",priority:1,created_at:"2021-01-01",updated_at:"2021-01-01"},{id:2,content:"test2",language:"test2",category:"test2",priority:2,created_at:"2021-01-02",updated_at:"2021-01-02"},{id:3,content:"test3",language:"test3",category:"test3",priority:3,created_at:"2021-01-03",updated_at:"2021-01-03"}]},async fetchMemoriesByCategory(){if(!this.selectedCategory)return;this.isLoading=!0;const i=await M(this.selectedCategory,this.offset,this.limit);this.memories=i,this.isLoading=!1},async selectCategory(i){this.isLoading=!0,this.selectedCategory=i,await this.fetchMemoriesByCategory(),this.isLoading=!1},nextPage(){this.isLoading||(this.offset+=this.limit,this.fetchMemoriesByCategory())},prevPage(){this.isLoading||this.offset-this.limit<0||(this.offset-=this.limit,this.fetchMemoriesByCategory())}}}),B={class:"px-4 sm:px-6 lg:px-8"},E={class:"sm:flex sm:items-center"},V={class:"sm:flex-auto"},F={class:"text-base font-semibold leading-6 text-gray-900"},T={class:"mt-2 text-sm text-gray-700"},$={key:0,class:"mt-8"},j={key:1,class:"mt-8 flow-root"},N={class:"sm:hidden"},S={for:"tabs",class:"sr-only"},D={id:"tabs",name:"tabs",class:"block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},G=["selected","onClick"],q={class:"hidden sm:block"},z={class:"border-b border-gray-200"},I={class:"-mb-px flex space-x-8","aria-label":"Tabs"},A=["onClick","aria-current"],H={key:0,class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},J={role:"list",class:"divide-y divide-gray-100"},K={class:"min-w-0"},O={class:"text-sm/6 text-gray-900 break-all"},Q={class:"mt-2 flex items-center justify-between"},R={class:"text-xs/5 text-gray-500"},U={class:"text-xs/5 text-gray-500"},W=["datetime"],X={class:"mt-8 flex justify-between"},Z=v({__name:"MemoryView",setup(i){const{t:a}=b(),o=P(),d=f(()=>o.categories.map(h=>({name:h})));C(()=>{o.fetchCategories()});const l=f(()=>o.memories);return(h,g)=>(c(),n("div",B,[t("div",E,[t("div",V,[t("h1",F,r(e(a)("memory")),1),t("p",T,r(e(a)("memoryViewDescription")),1)])]),e(o).categories.length===0?(c(),n("div",$,[t("p",null,r(e(a)("noCategory")),1)])):m("",!0),e(o).categories.length>0?(c(),n("div",j,[t("div",null,[t("div",N,[t("label",S,r(e(a)("selectCategory")),1),t("select",D,[(c(!0),n(u,null,y(d.value,s=>(c(),n("option",{key:s.name,selected:s.name===e(o).selectedCategory,onClick:p=>e(o).selectCategory(s.name)},r(s.name),9,G))),128))])]),t("div",q,[t("div",z,[t("nav",I,[(c(!0),n(u,null,y(d.value,s=>(c(),n("a",{key:s.name,onClick:p=>e(o).selectCategory(s.name),class:w([s.name===e(o).selectedCategory?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium"]),"aria-current":s.name===e(o).selectedCategory?"page":void 0},r(s.name),11,A))),128))])])])]),e(o).selectedCategory?(c(),n("div",H,[t("ul",J,[(c(!0),n(u,null,y(l.value,s=>(c(),n("li",{key:s.id,class:"py-5"},[t("div",K,[t("p",O,r(s.content),1)]),t("div",Q,[t("p",R,r(e(a)("priority"))+": "+r(s.priority),1),t("p",U,[k(r(e(a)("updated_at"))+" ",1),t("time",{datetime:s.updated_at},r(s.updated_at),9,W)])])]))),128))])])):m("",!0)])):m("",!0),t("div",X,[t("button",{type:"button",class:"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:g[0]||(g[0]=s=>e(o).prevPage())},r(e(o).isLoading?"Loading...":e(a)("prevPage")),1),t("button",{type:"button",class:"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:g[1]||(g[1]=s=>e(o).nextPage())},r(e(o).isLoading?"Loading...":e(a)("nextPage")),1)])]))}});export{Z as default};
