关于向量数据库

考虑到Agent可能会在过程中需要关于某件事情的信息

在自然语言中, 通过简单的SQL的 类似%LIKE% 之类的很难完全的搜索到准确信息

如果通过语意匹配, SQL有很强的能力去找到准确的信息, 并且有很多的开源和商业模型支持这个, 考虑到自己训练需要很多的数据和GPU资源, 并且在这件事情中性价比不高, 所以选择了OpenAI的



一般情况下, 大部分关系型数据库存在事物, 发生了错误可以rollback, 可以在最后统一commit, insert后不commit可以确保id不会冲突
Qdrant不存在这样的机制

所以可能会发生这样的问题

在进行create操作时发生了报错, 但是这个时候ORM和Qdrant同时进行了insert操作, raise到最外层并且被捕获到, ORM的session maker会回滚, 但是Qdrant没有这样的能力

接下来就会发生类似这样的严重问题

比如, 一个新创建的记录的id是33550336, ORM和Qdrant同时记录了这个ID, 但是发生了报错, ORM发生了rollback, 但是Qdrant没有rollback机制, 然后Qdrant留下了33550336这个id

查询某次内容时, 发现33550336这一条记录和需要找的内容非常相似, 然后用这一条ID去ORM中寻找发现什么都没找到, 程序抛出异常